function downloadJSAtOnload() {
  var t = document.createElement("script");
  (t.src = "./js/music.min.js"), document.body.appendChild(t);
}
function time() {
  clearTimeout(t), (dt = new Date());
  var e = dt.getYear() + 1900,
    n = dt.getMonth() + 1,
    o = dt.getDate(),
    s = ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"],
    i = dt.getDay(),
    a = dt.getHours(),
    c = dt.getMinutes(),
    l = dt.getSeconds();
  a < 10 && (a = "0" + a),
    c < 10 && (c = "0" + c),
    l < 10 && (l = "0" + l),
    $("#time").html(
      e +
        "&nbsp;年&nbsp;" +
        n +
        "&nbsp;月&nbsp;" +
        o +
        "&nbsp;日&nbsp;<span class='weekday'>" +
        s[i] +
        "</span><br><span class='time-text'>" +
        a +
        ":" +
        c +
        ":" +
        l +
        "</span>"
    ),
    (t = setTimeout(time, 1e3));
}
if (
  (iziToast.settings({
    timeout: 1e4,
    progressBar: !1,
    close: !1,
    closeOnEscape: !0,
    position: "topCenter",
    transitionIn: "bounceInDown",
    transitionOut: "flipOutX",
    displayMode: "replace",
    layout: "1",
    backgroundColor: "#00000040",
    titleColor: "#efefef",
    messageColor: "#efefef",
    iconColor: "#efefef",
  }),
  window.addEventListener(
    "load",
    function () {
      $("#loading-box").attr("class", "loaded"),
        $("#bg").css(
          "cssText",
          "transform: scale(1);filter: blur(0px);transition: ease 1.5s;"
        ),
        $(".cover").css("cssText", "opacity: 1;transition: ease 1.5s;"),
        $("#section").css(
          "cssText",
          "transform: scale(1) !important;opacity: 1 !important;filter: blur(0px) !important"
        ),
        setTimeout(function () {
          iziToast.show({
            timeout: 2500,
            title: hello,
            message: "欢迎来到我的主页",
          });
        }, 800);
    },
    !1
  ),

  window.addEventListener
    ? window.addEventListener("load", downloadJSAtOnload, !1)
    : window.attachEvent
    ? window.attachEvent("onload", downloadJSAtOnload)
    : (window.onload = downloadJSAtOnload),
  (isFirefox = navigator.userAgent.indexOf("Firefox") > 0))
) {
  var head = document.getElementsByTagName("head")[0],
    link = document.createElement("link");
  (link.href = "./css/firefox.css"),
    (link.rel = "stylesheet"),
    (link.type = "text/css"),
    head.appendChild(link),
    window.addEventListener(
      "load",
      function () {
        iziToast.show({
          timeout: 8e3,
          iconUrl: "./img/icon/warn.png",
          message: "您正在使用火狐浏览器，部分功能可能不支持",
        });
      },
      !1
    );
}
fetch("https://v1.hitokoto.cn?max_length=24")
  .then((t) => t.json())
  .then((t) => {
    $("#hitokoto_text").html(t.hitokoto), $("#from_text").html(t.from);
  })
  .catch(console.error),
  fetch(
    "https://www.yiketianqi.com/free/day?appid=43986679&appsecret=TksqGZT7&unescape=1"
  )
    .then((t) => t.json())
    .then((t) => {
      $("#wea_text").html(t.wea),
        $("#city_text").html(t.city),
        $("#tem_night").html(t.tem_night),
        $("#tem_day").html(t.tem_day);
    })
    .catch(console.error);
var t = null;
(t = setTimeout(time, 1e3)),
  $("#social")
    .mouseover(function () {
      $("#social").css({
        background: "rgb(0 0 0 / 25%)",
        "border-radius": "6px",
        "backdrop-filter": "blur(5px)",
      }),
        $("#link-text").css({ display: "block" });
    })
    .mouseout(function () {
      $("#social").css({
        background: "none",
        "border-radius": "6px",
        "backdrop-filter": "none",
      }),
        $("#link-text").css({ display: "none" });
    }),
  $("#Bilibili")
    .mouseover(function () {
      $("#link-text").html("去 Bilibili 看看");
    })
    .mouseout(function () {
      $("#link-text").html("通过这里联系我");
    }),

  $("#email")
    .mouseover(function () {
      $("#link-text").html("来封 Email");
    })
    .mouseout(function () {
      $("#link-text").html("通过这里联系我");
    }),
  $("#telegram")
    .mouseover(function () {
      $("#link-text").html("你懂的 ~");
    })
    .mouseout(function () {
      $("#link-text").html("通过这里联系我");
    })
    $(document).ready(function () {
      // 更多页面切换
      var shoemore = false;
      $('#switchmore').on('click', function () {
          shoemore = !shoemore;
          if (shoemore && $(window).width() >= 990) {
              $('#container').addClass('mores');
              $("#change").html("Oops&nbsp;!");
              $("#change1").html("哎呀，这都被你发现了（再点击一次可关闭）");
          } else {
              $('#container').removeClass('mores');
              $("#change").html("Hello&nbsp;World&nbsp;!");
              $("#change1").html("人生若只如初见,何事悲风秋画扇");
          }
      });
  
      // 更多页面关闭按钮
      $('#close').on('click', function () {
          $('#switchmore').click();
      });
  
      // 移动端菜单栏切换
      var switchmenu = false;
      $('#switchmenu').on('click', function () {
          switchmenu = !switchmenu;
          if (switchmenu) {
              $('#row').addClass('menus');
              $("#menu").html("<i class='iconfont icon-times'></i>");
          } else {
              $('#row').removeClass('menus');
              $("#menu").html("<i class='iconfont icon-bars'>");
          }
      });
  
      // 更多弹窗页面
      $('#openmore').on('click', function () {
          $('#box').show();
          $('#row').hide();
          $('#more').hide();
      });
      $('#closemore').on('click', function () {
          $('#box').hide();
          $('#row').css("display", "flex");
          $('#more').css("display", "flex");
      });
  
      // 防抖函数
      function debounce(func, wait) {
          let timeout;
          return function () {
              clearTimeout(timeout);
              timeout = setTimeout(() => func.apply(this, arguments), wait);
          };
      }
  
      // 监听网页宽度
      function handleResize() {
          if (window.innerWidth >= 600) {
              $('#row').removeClass('menus');
              $("#menu").html("<i class='iconfont icon-bars'>");
              $('#rightone').removeClass('mobile').addClass('rightone');
          }
  
          if (window.innerWidth <= 990) {
              $('#container').removeClass('mores');
              $("#change").html("Hello&nbsp;World&nbsp;!");
              $("#change1").html("江畔何年初见月?江月何年初照人");
  
              $('#box').hide();
              $('#row').css("display", "flex");
              $('#more').css("display", "flex");
          }
      }
  
      window.addEventListener('resize', debounce(handleResize, 100));
      handleResize(); // 初始化时调用一次
  
      // 移动端切换功能区
      var changemore = false;
      $('#changemore').on('click', function () {
          changemore = !changemore;
          if (changemore) {
              $('#rightone').addClass('mobile');
          } else {
              $('#rightone').removeClass('mobile');
          }
      });
  
      // 更多页面显示关闭按钮
      $("#more").hover(
          function () {
              $('#close').show();
          },
          function () {
              $('#close').hide();
          }
      );
  });
  
  (document.oncontextmenu = function () {
    return (
      iziToast.show({
        timeout: 2e3,
        iconUrl: "./img/icon/warn.png",
        message: "为了浏览体验，本站禁用右键",
      }),
      !1
    );
  });
var myDate = new Date(),
  mon = myDate.getMonth() + 1,
  date = myDate.getDate(),
  days = ["4.4", "5.12", "7.7", "9.18", "12.13"];
for (var day of days) {
  var d = day.split(".");
  mon == d[0] &&
    date == d[1] &&
    (document.write(
      "<style>html{-webkit-filter:grayscale(100%);-moz-filter:grayscale(100%);-ms-filter:grayscale(100%);-o-filter:grayscale(100%);filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);_filter:none}</style>"
    ),
    $("#change").html("Silence&nbsp;in&nbsp;silence"),
    $("#change1").html("今天是中国国家纪念日，全站已切换为黑白模式"),
    window.addEventListener(
      "load",
      function () {
        iziToast.show({
          timeout: 14e3,
          iconUrl: "./img/icon/candle.png",
          message: "今天是中国国家纪念日",
        });
      },
      !1
    ));
}

